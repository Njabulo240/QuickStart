"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[209],{2209:(V,y,e)=>{e.r(y),e.d(y,{AuthenticationModule:()=>T});var c=e(8498),P=e(177),f=e(9308),u=e(1818),v=e(2788),E=e(1351),w=e(5484),o=e(9417),U=e(4912),R=e(5509),t=e(4438),j=e(1682),I=e(3575),S=e(1321),h=e(7421);function D(i,J){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Confirmation is required"),t.k0s())}function $(i,J){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Passwords must match"),t.k0s())}let k=(()=>{class i{constructor(a,r,s,d,b,m){this.authService=a,this.passConfValidator=r,this.route=s,this.router=d,this.dialogserve=b,this.activeRoute=m,this.hidePassword=!0,this.validateControl=n=>this.passwordForm.get(n).invalid&&this.passwordForm.get(n).touched,this.hasError=(n,l)=>this.passwordForm.get(n).hasError(l),this.resetPassword=n=>{const l={...n};this.authService.changeDefaultPassword(`api/authentication/${this.activeRoute.snapshot.params.user}/ChangeDefulatPassword`,{password:l.password,confirmPassword:l.confirm}).subscribe({next:C=>{this.dialogserve.openSuccessDialog("Password changed successfully, please login.").afterClosed().subscribe(M=>{this.logout()})},error:C=>{console.log(C.message),this.dialogserve.openErrorDialog(C.message).afterClosed().subscribe(M=>{})}})},this.logout=()=>{this.authService.logout(),this.router.navigate(["/authentication/login"])}}ngOnInit(){this.passwordForm=new o.gE({password:new o.MJ("",[o.k0.required]),confirm:new o.MJ("",[o.k0.required])}),this.passwordForm.get("confirm").setValidators([o.k0.required,this.passConfValidator.validateConfirmPassword(this.passwordForm.get("password"))])}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(j.k),t.rXU(I.a),t.rXU(c.nX),t.rXU(c.Ix),t.rXU(S.o),t.rXU(c.nX))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-change-defualt-password"]],decls:31,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100","position-relative"],[1,"password-container"],["matInput","","id","password","formControlName","password",1,"form-control",3,"type"],[1,"password-toggle-button",3,"click"],["matInput","","id","confirm","formControlName","confirm",1,"form-control",3,"type"],[4,"ngIf"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a"),t.nrm(7,"img",6),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Change password"),t.k0s(),t.j41(10,"form",7),t.bIt("ngSubmit",function(){return s.resetPassword(s.passwordForm.value)}),t.j41(11,"mat-label",8),t.EFF(12,"Password"),t.k0s(),t.j41(13,"mat-form-field",9)(14,"div",10),t.nrm(15,"input",11),t.j41(16,"div",12),t.bIt("click",function(){return s.togglePasswordVisibility()}),t.j41(17,"mat-icon"),t.EFF(18),t.k0s()()()(),t.j41(19,"mat-label",8),t.EFF(20,"Confirm Password"),t.k0s(),t.j41(21,"mat-form-field",9)(22,"div",10),t.nrm(23,"input",13),t.j41(24,"div",12),t.bIt("click",function(){return s.togglePasswordVisibility()}),t.j41(25,"mat-icon"),t.EFF(26),t.k0s()()()(),t.DNE(27,D,2,0,"mat-error",14)(28,$,2,0,"mat-error",14),t.j41(29,"button",15),t.EFF(30," Change password "),t.k0s()()()()()()()),2&r&&(t.R7$(10),t.Y8G("formGroup",s.passwordForm),t.R7$(5),t.Y8G("type",s.hidePassword?"password":"text"),t.R7$(3),t.JRh(s.hidePassword?"visibility_off":"visibility"),t.R7$(5),t.Y8G("type",s.hidePassword?"password":"text"),t.R7$(3),t.JRh(s.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("ngIf",s.validateControl("confirm")&&s.hasError("confirm","required")),t.R7$(),t.Y8G("ngIf",s.hasError("confirm","mustMatch")),t.R7$(),t.Y8G("disabled",!s.passwordForm.valid))},dependencies:[P.bT,f.An,u.RN,u.m2,u.dh,v.fg,h.rl,h.nJ,h.TL,w.$z,o.qT,o.me,o.BC,o.cb,o.j4,o.JD],encapsulation:2})}return i})();var X=e(2524);const A=[{path:"",children:[{path:"login",component:(()=>{class i{constructor(a,r,s,d,b){this.authService=a,this.router=r,this.route=s,this.dialogserve=d,this.dialog=b,this.hidePassword=!0,this.validateControl=m=>this.loginForm?.get(m)?.invalid&&this.loginForm.get(m)?.touched,this.hasError=(m,n)=>this.loginForm?.get(m)?.hasError(n),this.loginUser=m=>{const l={...m};this.authService.loginUser("api/authentication/login",{userName:l.username,password:l.password}).subscribe({next:g=>{"Password.321"===l.password?(this.authService.logout(),this.router.navigate([`/authentication/change-password/${l.username}`])):(localStorage.setItem("token",g.token),this.authService.sendAuthStateChangeNotification(g.isAuthSuccessful),this.authService.updateuser.next(),this.router.navigate(["/"]))},error:g=>{this.dialogserve.openErrorDialog(g.message).afterClosed().subscribe(p=>{this.router.navigate(["authentication/login"])})}})}}ngOnInit(){this.loginForm=new o.gE({username:new o.MJ("",[o.k0.required]),password:new o.MJ("",[o.k0.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}Update(a){this.dialog.open(k,{width:"400px",height:"440px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{user:a}})}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(j.k),t.rXU(c.Ix),t.rXU(c.nX),t.rXU(S.o),t.rXU(X.bZ))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-login"]],decls:25,vars:4,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","text","id","username","formControlName","username",1,"form-control"],["appearance","outline","color","primary",1,"w-100","position-relative"],[1,"password-container"],["matInput","","id","password","formControlName","password",1,"form-control",3,"type"],[1,"password-toggle-button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a"),t.nrm(7,"img",6),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Log in"),t.k0s(),t.j41(10,"form",7),t.bIt("ngSubmit",function(){return s.loginUser(s.loginForm.value)}),t.j41(11,"mat-label",8),t.EFF(12,"Username"),t.k0s(),t.j41(13,"mat-form-field",9),t.nrm(14,"input",10),t.k0s(),t.j41(15,"mat-label",8),t.EFF(16,"Password"),t.k0s(),t.j41(17,"mat-form-field",11)(18,"div",12),t.nrm(19,"input",13),t.j41(20,"div",14),t.bIt("click",function(){return s.togglePasswordVisibility()}),t.j41(21,"mat-icon"),t.EFF(22),t.k0s()()()(),t.j41(23,"button",15),t.EFF(24," Sign In "),t.k0s()()()()()()()),2&r&&(t.R7$(10),t.Y8G("formGroup",s.loginForm),t.R7$(9),t.Y8G("type",s.hidePassword?"password":"text"),t.R7$(3),t.JRh(s.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("disabled",!s.loginForm.valid))},dependencies:[f.An,u.RN,u.m2,u.dh,v.fg,h.rl,h.nJ,w.$z,o.qT,o.me,o.BC,o.cb,o.j4,o.JD],encapsulation:2})}return i})()},{path:"change-password/:user",component:k}]}];var G=e(1626);let T=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#o=this.\u0275mod=t.$C({type:i});static#s=this.\u0275inj=t.G2t({imports:[P.MD,c.iI.forChild(A),f.m_,u.Hu,v.fS,E.g7,w.Hl,o.YN,o.X1,U.X.pick(R),G.q1]})}return i})()}}]);