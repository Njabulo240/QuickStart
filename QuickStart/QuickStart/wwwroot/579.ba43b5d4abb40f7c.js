"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[579],{5579:(ge,x,h)=>{h.r(x),h.d(x,{UicomponentsModule:()=>Fe});var A=h(8498),R=h(177),i=h(9417),M=h(2448),L=h(4912),X=h(5509),B=h(467),y=h(9217),S=h(5756),c=h(5686),t=h(4438),C=h(958),E=h(5794),Y=h(1413);let D=(()=>{class e{constructor(){this.refreshTab1=new Y.B,this.refreshTab1$=this.refreshTab1.asObservable()}triggerRefreshTab1(){this.refreshTab1.next()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var j=h(1321),b=h(2524),N=h(1918),_=h(7421),T=h(2788),l=h(1818),k=h(5484),v=h(9308);let V=(()=>{class e{constructor(a,o,s,r,d){this.repoService=a,this.toastr=o,this.dataService=s,this.dialogserve=r,this.Ref=d,this.validateControl=u=>this.dataForm?.get(u)?.invalid&&this.dataForm?.get(u)?.touched,this.hasError=(u,m)=>this.dataForm?.get(u)?.hasError(m),this.createData=u=>{this.dataForm.valid&&this.executeDataCreation(u)},this.executeDataCreation=u=>{let m={firstName:u.firstName,lastName:u.lastName,dateOfBirth:u.dateOfBirth,address:u.address,country:u.country};console.log(m),this.repoService.create("api/customers",m).subscribe(f=>{this.dialogserve.openSuccessDialog("The customer has been added successfully.").afterClosed().subscribe(F=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f)})}}ngOnInit(){this.dataForm=new i.gE({firstName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),lastName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),dateOfBirth:new i.MJ(new Date),address:new i.MJ("",[i.k0.required,i.k0.maxLength(100)]),country:new i.MJ("",[i.k0.required,i.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(E.tw),t.rXU(D),t.rXU(j.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,s){if(1&o){const r=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Create customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(r),t.Njj(s.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(r),t.Njj(s.createData(s.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(r);const u=t.sdS(22);return t.Njj(u.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Save "),t.k0s()()()()}if(2&o){const r=t.sdS(22);t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(10),t.Y8G("matDatepicker",r),t.R7$(),t.Y8G("for",r),t.R7$(11),t.Y8G("disabled",!s.dataForm.valid)}},dependencies:[N.Vh,N.bZ,N.bU,_.rl,_.nJ,_.yw,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})(),O=(()=>{class e{constructor(a,o,s,r,d,u){this.repoService=a,this.toastr=o,this.dataService=s,this.dialogserve=r,this.data=d,this.Ref=u,this.validateControl=m=>this.dataForm?.get(m)?.invalid&&this.dataForm?.get(m)?.touched,this.hasError=(m,p)=>this.dataForm?.get(m)?.hasError(p),this.createData=m=>{this.dataForm.valid&&this.executeDataCreation(m)},this.executeDataCreation=m=>{this.repoService.update(`api/customers/${this.result.id}`,{firstName:m.firstName,lastName:m.lastName,dateOfBirth:m.dateOfBirth,address:m.address,country:m.country}).subscribe(g=>{this.dialogserve.openSuccessDialog("The customer has been updated successfully.").afterClosed().subscribe(I=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},g=>{this.toastr.error(g)})},this.getCustomertoUpdate=()=>{const p=`api/customers/${this.result.id}`;console.log(p),this.repoService.getData(p).subscribe({next:f=>{this.customer={...f},this.dataForm.patchValue(this.customer)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new i.gE({firstName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),lastName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),dateOfBirth:new i.MJ(new Date),address:new i.MJ("",[i.k0.required,i.k0.maxLength(100)]),country:new i.MJ("",[i.k0.required,i.k0.maxLength(60)])}),this.result=this.data,this.getCustomertoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(E.tw),t.rXU(D),t.rXU(j.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,s){if(1&o){const r=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Update customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(r),t.Njj(s.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(r),t.Njj(s.createData(s.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(r);const u=t.sdS(22);return t.Njj(u.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Update "),t.k0s()()()()}if(2&o){const r=t.sdS(22);t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(10),t.Y8G("matDatepicker",r),t.R7$(),t.Y8G("for",r),t.R7$(11),t.Y8G("disabled",!s.dataForm.valid)}},dependencies:[N.Vh,N.bZ,N.bU,_.rl,_.nJ,_.yw,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})();var U=h(8269),$=h(6038);const J=()=>[4,6,10,20];function H(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Action "),t.k0s())}function z(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",27)(1,"button",28),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",29,0)(7,"button",30),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.redirectToDetails(s.id))}),t.EFF(8," Details "),t.k0s(),t.j41(9,"button",30),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.updateCustomer(s.id))}),t.EFF(10," Edit "),t.k0s(),t.j41(11,"button",30),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.DeleteCustomer(s.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function q(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," FirstName "),t.k0s())}function P(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.firstName," ")}}function W(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," LastName "),t.k0s())}function Z(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.lastName," ")}}function Q(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," DateOfBirth "),t.k0s())}function K(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.dateOfBirth,"mediumDate")," ")}}function tt(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," Country "),t.k0s())}function et(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.country," ")}}function at(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Type "),t.k0s())}function st(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," No Account "),t.k0s())}function ot(e,n){1&e&&(t.j41(0,"span",35),t.EFF(1," Beginner "),t.k0s())}function it(e,n){1&e&&(t.j41(0,"span",36),t.EFF(1," Advanced "),t.k0s())}function rt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," Gold "),t.k0s())}function nt(e,n){1&e&&(t.j41(0,"span",37),t.EFF(1," Platinum "),t.k0s())}function mt(e,n){if(1&e&&(t.j41(0,"td",32),t.DNE(1,st,2,0,"ng-template",33)(2,ot,2,0,"ng-template",33)(3,it,2,0,"ng-template",33)(4,rt,2,0,"ng-template",33)(5,nt,2,0,"ng-template",33),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf","0"==a.accountCount),t.R7$(),t.Y8G("ngIf","1"==a.accountCount),t.R7$(),t.Y8G("ngIf","2"==a.accountCount),t.R7$(),t.Y8G("ngIf","3"==a.accountCount),t.R7$(),t.Y8G("ngIf",+a.accountCount>=4)}}function lt(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Status "),t.k0s())}function ct(e,n){1&e&&(t.j41(0,"span",35),t.EFF(1," Active "),t.k0s())}function dt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," Blocked "),t.k0s())}function ut(e,n){if(1&e&&(t.j41(0,"td",32),t.DNE(1,ct,2,0,"ng-template",33)(2,dt,2,0,"ng-template",33),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf",1==a.status),t.R7$(),t.Y8G("ngIf",0==a.status)}}function pt(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Details "),t.k0s())}function ht(e,n){1&e&&(t.j41(0,"td",27)(1,"mat-icon",38),t.EFF(2,"remove_red_eye"),t.k0s()())}function ft(e,n){1&e&&t.nrm(0,"tr",39)}function _t(e,n){1&e&&t.nrm(0,"tr",40)}let bt=(()=>{class e{constructor(a,o,s,r,d,u){var m=this;this.repoService=a,this.router=o,this.toastr=s,this.dialog=r,this.dataService=d,this.dialogserve=u,this.displayedColumns=["action","firstName","lastName","dateOfBirth","country","type","status"],this.dataSource=new c.I6,this.doFilter=p=>{this.dataSource.filter=p.trim().toLocaleLowerCase()},this.redirectToDetails=function(){var p=(0,B.A)(function*(f){m.router.navigate([`/ui-components/customer-details/${f}`])});return function(f){return p.apply(this,arguments)}}(),this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCustomers()})}ngOnInit(){this.getCustomers()}getCustomers(){this.repoService.getData("api/customers").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addCustomer(){this.dialog.open(V,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateCustomer(a){this.dialog.open(O,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteCustomer(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the customer ?").afterClosed().subscribe(o=>{o&&this.repoService.delete(`api/customers/${a}`).subscribe(r=>{this.dialogserve.openSuccessDialog("The customer has been deleted successfully.").afterClosed().subscribe(d=>{this.getCustomers()})})})}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(A.Ix),t.rXU(E.tw),t.rXU(b.bZ),t.rXU(D),t.rXU(j.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-lists"]],viewQuery:function(o,s){if(1&o&&(t.GBs(y.iy,5),t.GBs(S.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(s.paginator=r.first),t.mGM(r=t.lsd())&&(s.sort=r.first)}},decls:42,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","firstName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","lastName"],["matColumnDef","dateOfBirth"],["matColumnDef","country"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["color","primary"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Customers"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return s.addCustomer()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new customer"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"mat-form-field",7)(12,"input",8),t.bIt("keyup",function(d){return s.doFilter(d.target.value)}),t.k0s()(),t.j41(13,"div",9)(14,"table",10),t.qex(15,11),t.DNE(16,H,2,0,"th",12)(17,z,13,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,q,2,0,"th",15)(20,P,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,W,2,0,"th",15)(23,Z,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,Q,2,0,"th",15)(26,K,3,4,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,tt,2,0,"th",15)(29,et,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,at,2,0,"th",12)(32,mt,6,5,"td",20),t.bVm(),t.qex(33,21),t.DNE(34,lt,2,0,"th",12)(35,ut,3,2,"td",20),t.bVm(),t.qex(36,22),t.DNE(37,pt,2,0,"th",12)(38,ht,3,0,"td",13),t.bVm(),t.DNE(39,ft,1,0,"tr",23)(40,_t,1,0,"tr",24),t.k0s()(),t.nrm(41,"mat-paginator",25),t.k0s()()),2&o&&(t.R7$(14),t.Y8G("dataSource",s.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,J)))},dependencies:[R.bT,_.rl,T.fg,U.kk,U.fb,U.Cp,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,y.iy,S.B4,S.aE,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,$.Om,R.vh],encapsulation:2})}return e})();var Ft=h(1682),G=h(1351);function gt(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Please provide a valid email"),t.k0s())}function Ct(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Email is required"),t.k0s())}function kt(e,n){if(1&e){const a=t.RV6();t.j41(0,"div")(1,"mat-checkbox",15),t.bIt("change",function(s){const r=t.eBV(a).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(s,r.name))}),t.EFF(2),t.k0s()()}if(2&e){const a=n.$implicit,o=t.XpG();t.R7$(),t.Y8G("checked",o.isSelected(a.name)),t.R7$(),t.SpI(" ",a.name," ")}}let vt=(()=>{class e{constructor(a,o,s,r,d,u){this.repoService=a,this.dataService=o,this.toastr=s,this.dialogserve=r,this.authService=d,this.Ref=u,this.selectedRoles=[],this.validateControl=m=>this.dataForm?.get(m)?.invalid&&this.dataForm?.get(m)?.touched,this.hasError=(m,p)=>this.dataForm?.get(m)?.hasError(p),this.createData=m=>{this.dataForm.valid&&this.executeDataCreation(m)},this.executeDataCreation=m=>{this.authService.registerUser("api/authentication",{firstName:m.firstName,lastName:m.lastName,userName:m.userName,email:m.email,roles:this.selectedRoles}).subscribe(F=>{this.dialogserve.openSuccessDialog("The default password is sent to the user's email address").afterClosed().subscribe(g=>{this.dialogserve.openSuccessDialog("The user has been added successfully.").afterClosed().subscribe(I=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})})},F=>{this.dialogserve.openErrorDialog(F.message).afterClosed().subscribe(g=>{})})}}ngOnInit(){this.dataForm=new i.gE({firstName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),lastName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),userName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),email:new i.MJ("",[i.k0.required,i.k0.email])}),this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe(a=>{this.roles=a},a=>{this.toastr.success(a)})}isSelected(a){return this.selectedRoles.includes(a)}toggleRoleSelection(a,o){a.checked?this.selectedRoles.push(o):this.selectedRoles=this.selectedRoles.filter(s=>s!==o)}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(D),t.rXU(E.tw),t.rXU(j.o),t.rXU(Ft.k),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-user"]],decls:33,vars:5,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return s.createData(s.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,gt,2,0,"mat-error",12)(27,Ct,2,0,"mat-error",12),t.k0s(),t.j41(28,"mat-label"),t.EFF(29,"Roles"),t.k0s(),t.DNE(30,kt,3,2,"div",13),t.j41(31,"button",14),t.EFF(32," Save "),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(17),t.Y8G("ngIf",s.validateControl("email")&&s.hasError("email","email")),t.R7$(),t.Y8G("ngIf",s.validateControl("email")&&s.hasError("email","required")),t.R7$(3),t.Y8G("ngForOf",s.roles),t.R7$(),t.Y8G("disabled",!s.dataForm.valid))},dependencies:[R.Sq,R.bT,G.So,_.rl,_.nJ,_.TL,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})();function Rt(e,n){if(1&e){const a=t.RV6();t.j41(0,"div")(1,"mat-checkbox",14),t.bIt("change",function(s){const r=t.eBV(a).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(s,r.name))}),t.EFF(2),t.k0s()()}if(2&e){const a=n.$implicit,o=t.XpG();t.R7$(),t.Y8G("checked",o.isSelected(a.name)),t.R7$(),t.SpI(" ",a.name," ")}}let jt=(()=>{class e{constructor(a,o,s,r,d,u){this.repoService=a,this.dataService=o,this.toastr=s,this.dialogserve=r,this.data=d,this.Ref=u,this.selectedRoles=[],this.validateControl=m=>this.dataForm?.get(m)?.invalid&&this.dataForm?.get(m)?.touched,this.hasError=(m,p)=>this.dataForm?.get(m)?.hasError(p),this.createData=m=>{this.dataForm.valid&&this.executeDataCreation(m)},this.executeDataCreation=m=>{this.repoService.update(`api/users/${this.result.id}`,{firstName:m.firstName,lastName:m.lastName,userName:m.userName,email:m.email,roles:this.selectedRoles}).subscribe(g=>{this.dialogserve.openSuccessDialog("The user has been updated successfully.").afterClosed().subscribe(I=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},g=>{this.toastr.error(g),this.Ref.close([])})},this.getUsertoUpdate=()=>{const p=`api/users/${this.result.id}`;console.log(p),this.repoService.getData(p).subscribe({next:f=>{this.user={...f},this.dataForm.patchValue(this.user),this.selectedRoles=this.user.roles},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new i.gE({firstName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),lastName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),userName:new i.MJ("",[i.k0.required,i.k0.maxLength(60)]),email:new i.MJ("",[i.k0.required,i.k0.maxLength(100)])}),this.getRoles(),this.result=this.data,this.getUsertoUpdate()}getRoles(){this.repoService.getData("api/roles").subscribe(a=>{this.roles=a},a=>{this.toastr.error(a)})}toggleRoleSelection(a,o){a.checked?this.selectedRoles.push(o):this.selectedRoles=this.selectedRoles.filter(s=>s!==o)}closeModal(){this.Ref.close([])}isSelected(a){return this.selectedRoles.includes(a)}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(D),t.rXU(E.tw),t.rXU(j.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-user"]],decls:31,vars:3,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","formControlName","email"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return s.createData(s.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.k0s(),t.j41(26,"mat-label"),t.EFF(27,"Roles"),t.k0s(),t.DNE(28,Rt,3,2,"div",12),t.j41(29,"button",13),t.EFF(30," Save "),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(19),t.Y8G("ngForOf",s.roles),t.R7$(),t.Y8G("disabled",!s.dataForm.valid))},dependencies:[R.Sq,G.So,_.rl,_.nJ,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})();const Et=()=>[4,6,10,20];function Dt(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Action "),t.k0s())}function St(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",26)(1,"button",27),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",28,0)(7,"button",29),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.updateUser(s.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",29),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.DeleteUser(s.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function Tt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," User Name "),t.k0s())}function Ut(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.userName," ")}}function wt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," First Name "),t.k0s())}function yt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.firstName," ")}}function Nt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," Last Name "),t.k0s())}function At(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.lastName," ")}}function $t(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Roles "),t.k0s())}function It(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.roles," ")}}function xt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," Email "),t.k0s())}function Gt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.email," ")}}function Mt(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Email confirm "),t.k0s())}function Lt(e,n){1&e&&(t.j41(0,"span",33),t.EFF(1," Yes "),t.k0s())}function Xt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," No "),t.k0s())}function Bt(e,n){if(1&e&&(t.j41(0,"td",31),t.DNE(1,Lt,2,0,"ng-template",32)(2,Xt,2,0,"ng-template",32),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf","True"==a.emailConfirmed),t.R7$(),t.Y8G("ngIf","False"==a.emailConfirmed)}}function Yt(e,n){1&e&&t.nrm(0,"tr",35)}function Vt(e,n){1&e&&t.nrm(0,"tr",36)}let Ot=(()=>{class e{constructor(a,o,s,r){this.repoService=a,this.dialog=o,this.dialogserve=s,this.dataService=r,this.displayedColumns=["action","username","name","surname","roles","email","emailconfirm"],this.dataSource=new c.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getUsers()})}ngOnInit(){this.getUsers()}getUsers(){this.repoService.getData("api/users").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}addUser(){this.dialog.open(vt,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateUser(a){this.dialog.open(jt,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteUser(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the user ?").afterClosed().subscribe(o=>{o&&this.repoService.delete(`api/users/${a}`).subscribe(r=>{this.dialogserve.openSuccessDialog("The user has been deleted successfully.").afterClosed().subscribe(d=>{this.getUsers()})})})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(b.bZ),t.rXU(j.o),t.rXU(D))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-users"]],viewQuery:function(o,s){if(1&o&&(t.GBs(y.iy,5),t.GBs(S.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(s.paginator=r.first),t.mGM(r=t.lsd())&&(s.sort=r.first)}},decls:39,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","surname"],["matColumnDef","roles"],["matColumnDef","email"],["matColumnDef","emailconfirm"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Users"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return s.addUser()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new user"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),t.bIt("keyup",function(d){return s.doFilter(d.target.value)}),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,Dt,2,0,"th",12)(17,St,11,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,Tt,2,0,"th",15)(20,Ut,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,wt,2,0,"th",15)(23,yt,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,Nt,2,0,"th",15)(26,At,2,1,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,$t,2,0,"th",12)(29,It,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,xt,2,0,"th",15)(32,Gt,2,1,"td",13),t.bVm(),t.qex(33,20),t.DNE(34,Mt,2,0,"th",12)(35,Bt,3,2,"td",21),t.bVm(),t.DNE(36,Yt,1,0,"tr",22)(37,Vt,1,0,"tr",23),t.k0s()(),t.nrm(38,"mat-paginator",24),t.k0s()()),2&o&&(t.R7$(14),t.Y8G("dataSource",s.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,Et)))},dependencies:[R.bT,_.rl,T.fg,U.kk,U.fb,U.Cp,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,y.iy,S.B4,S.aE,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,$.Om],encapsulation:2})}return e})(),Jt=(()=>{class e{constructor(a,o,s,r,d,u){this.repoService=a,this.toastr=o,this.dataService=s,this.dialogserve=r,this.data=d,this.Ref=u,this.validateControl=m=>this.dataForm?.get(m)?.invalid&&this.dataForm?.get(m)?.touched,this.hasError=(m,p)=>this.dataForm?.get(m)?.hasError(p),this.createData=m=>{this.dataForm.valid&&this.executeDataCreation(m)},this.executeDataCreation=m=>{this.repoService.update(`api/roles/${this.result.id}`,{name:m.name}).subscribe(g=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(I=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},g=>{this.toastr.error(g),this.Ref.close([])})},this.getRoletoUpdate=()=>{const p=`api/roles/${this.result.id}`;console.log(p),this.repoService.getData(p).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new i.gE({name:new i.MJ("",[i.k0.required,i.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(E.tw),t.rXU(D),t.rXU(j.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return s.createData(s.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(5),t.Y8G("disabled",!s.dataForm.valid))},dependencies:[_.rl,_.nJ,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})(),Ht=(()=>{class e{constructor(a,o,s,r,d){this.repoService=a,this.toastr=o,this.dataService=s,this.dialogserve=r,this.Ref=d,this.validateControl=u=>this.dataForm?.get(u)?.invalid&&this.dataForm?.get(u)?.touched,this.hasError=(u,m)=>this.dataForm?.get(u)?.hasError(m),this.createData=u=>{this.dataForm.valid&&this.executeDataCreation(u)},this.executeDataCreation=u=>{this.repoService.create("api/roles",{name:u.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(F=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new i.gE({name:new i.MJ("",[i.k0.required,i.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(E.tw),t.rXU(D),t.rXU(j.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return s.createData(s.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(5),t.Y8G("disabled",!s.dataForm.valid))},dependencies:[_.rl,_.nJ,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})();function zt(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1," Action "),t.k0s())}function qt(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",16)(1,"button",17),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",18,0)(7,"button",19),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.UpdateRole(s.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",19),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.DeleteRole(s.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function Pt(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1," Role Name "),t.k0s())}function Wt(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.name," ")}}function Zt(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1," Creation time "),t.k0s())}function Qt(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.dateCreated,"medium")," ")}}function Kt(e,n){1&e&&t.nrm(0,"tr",20)}function te(e,n){1&e&&t.nrm(0,"tr",21)}let ee=(()=>{class e{constructor(a,o,s,r,d){this.repoService=a,this.dialog=o,this.toastr=s,this.dataService=r,this.dialogserve=d,this.displayedColumns=["action","role","date"],this.dataSource=new c.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getRoles()})}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}addRole(){this.dialog.open(Ht,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdateRole(a){this.dialog.open(Jt,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteRole(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the role ?").afterClosed().subscribe(o=>{o&&this.repoService.delete(`api/roles/${a}`).subscribe(r=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getRoles()})})})}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(b.bZ),t.rXU(E.tw),t.rXU(D),t.rXU(j.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-roles"]],decls:23,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User roles"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return s.addRole()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8,"Create new role "),t.k0s()(),t.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),t.qex(12,8),t.DNE(13,zt,2,0,"th",9)(14,qt,11,1,"td",10),t.bVm(),t.qex(15,11),t.DNE(16,Pt,2,0,"th",9)(17,Wt,2,1,"td",10),t.bVm(),t.qex(18,12),t.DNE(19,Zt,2,0,"th",9)(20,Qt,3,4,"td",10),t.bVm(),t.DNE(21,Kt,1,0,"tr",13)(22,te,1,0,"tr",14),t.k0s()()()()),2&o&&(t.R7$(11),t.Y8G("dataSource",s.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns))},dependencies:[U.kk,U.fb,U.Cp,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,R.vh],encapsulation:2})}return e})();const ae=()=>[4,6,10,20];function se(e,n){1&e&&(t.j41(0,"th",18),t.EFF(1," Entity "),t.k0s())}function oe(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.entityName," ")}}function ie(e,n){1&e&&(t.j41(0,"th",20),t.EFF(1," Action "),t.k0s())}function re(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.action," ")}}function ne(e,n){1&e&&(t.j41(0,"th",18),t.EFF(1," Creation time "),t.k0s())}function me(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.timestamp,"medium")," ")}}function le(e,n){1&e&&(t.j41(0,"th",20),t.EFF(1," Changes "),t.k0s())}function ce(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.changes," ")}}function de(e,n){1&e&&t.nrm(0,"tr",21)}function ue(e,n){1&e&&t.nrm(0,"tr",22)}let pe=(()=>{class e{constructor(a){this.repoService=a,this.displayedColumns=["name","action","date","change"],this.dataSource=new c.I6}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/audits").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.getRoles()}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-audits"]],viewQuery:function(o,s){if(1&o&&(t.GBs(y.iy,5),t.GBs(S.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(s.paginator=r.first),t.mGM(r=t.lsd())&&(s.sort=r.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","change"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Audit logs"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.refresh()}),t.j41(6,"span",4),t.EFF(7,"Refresh"),t.k0s(),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()(),t.j41(10,"mat-card-content",5)(11,"div",6)(12,"table",7),t.qex(13,8),t.DNE(14,se,2,0,"th",9)(15,oe,2,1,"td",10),t.bVm(),t.qex(16,11),t.DNE(17,ie,2,0,"th",12)(18,re,2,1,"td",10),t.bVm(),t.qex(19,13),t.DNE(20,ne,2,0,"th",9)(21,me,3,4,"td",10),t.bVm(),t.qex(22,14),t.DNE(23,le,2,0,"th",12)(24,ce,2,1,"td",10),t.bVm(),t.DNE(25,de,1,0,"tr",15)(26,ue,1,0,"tr",16),t.k0s()(),t.nrm(27,"mat-paginator",17),t.k0s()()),2&o&&(t.R7$(12),t.Y8G("dataSource",s.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,ae)))},dependencies:[l.RN,l.m2,l.MM,l.dh,k.$z,v.An,y.iy,S.B4,S.aE,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,$.Om,R.vh],encapsulation:2})}return e})(),he=(()=>{class e{constructor(a,o,s,r,d,u){this.repoService=a,this.toastr=o,this.dataService=s,this.dialogserve=r,this.data=d,this.Ref=u,this.validateControl=m=>this.dataForm?.get(m)?.invalid&&this.dataForm?.get(m)?.touched,this.hasError=(m,p)=>this.dataForm?.get(m)?.hasError(p),this.createData=m=>{this.dataForm.valid&&this.executeDataCreation(m)},this.executeDataCreation=m=>{this.repoService.create(`api/customers/${this.result.id}/accounts`,{accountType:m.accountType}).subscribe(g=>{this.dialogserve.openSuccessDialog("The account has been added successfully.").afterClosed().subscribe(I=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},g=>{this.toastr.error(g)})}}ngOnInit(){this.dataForm=new i.gE({accountType:new i.MJ("",[i.k0.required,i.k0.maxLength(60)])}),this.result=this.data}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(E.tw),t.rXU(D),t.rXU(j.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-account"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","accountType"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create Account"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return s.createData(s.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Account type"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("formGroup",s.dataForm),t.R7$(5),t.Y8G("disabled",!s.dataForm.valid))},dependencies:[_.rl,_.nJ,T.fg,l.RN,l.m2,l.MM,l.dh,k.$z,v.An,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],encapsulation:2})}return e})();var w=h(2608);function fe(e,n){if(1&e){const a=t.RV6();t.j41(0,"div",13)(1,"mat-card",7)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content",4)(6,"mat-list")(7,"mat-list-item")(8,"span",8),t.EFF(9,"Created"),t.k0s(),t.j41(10,"span",9),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"button",14),t.bIt("click",function(){const s=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.DeleteCustomer(s.id))}),t.EFF(14," Delete "),t.k0s()()()()}if(2&e){const a=n.$implicit;t.R7$(4),t.SpI("Account: ",a.accountType,""),t.R7$(7),t.JRh(t.i5U(12,2,a.dateCreated,"medium"))}}const _e=[{path:"",children:[{path:"lists",component:bt},{path:"users",component:Ot},{path:"roles",component:ee},{path:"audits",component:pe},{path:"about",component:(()=>{class e{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-about"]],decls:22,vars:0,consts:[[1,"cardWithShadow"],[1,"mat-body-1"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"mat-card-title"),t.EFF(3,"Welcome to MatechCoding QuickStart"),t.k0s(),t.j41(4,"mat-card-subtitle",1),t.EFF(5," ASP.NET Core / Angular starting point project with SOLID Architecture, Advanced Authentication & Authorization, user and role management, and other useful services for Quick Application Development. "),t.k0s(),t.j41(6,"mat-list")(7,"mat-list-item")(8,"span",2),t.EFF(9,"This application consists of:"),t.k0s(),t.j41(10,"span",3),t.EFF(11,"Onion Architecture"),t.k0s(),t.j41(12,"span",3),t.EFF(13,"Database using Entity Framework Core"),t.k0s(),t.j41(14,"span",3),t.EFF(15,"Advanced Authentication/Authorization"),t.k0s(),t.j41(16,"span",3),t.EFF(17,"Real-time push notification system (with SignalR integration)"),t.k0s(),t.j41(18,"span",3),t.EFF(19,"Swagger integration"),t.k0s(),t.j41(20,"span",3),t.EFF(21,"Angular Material and TypeScript"),t.k0s()()()()())},dependencies:[l.RN,l.m2,l.Lc,l.dh,w.jt,w.YE,w.C_,w.yE],encapsulation:2})}return e})()},{path:"customer-details/:id",component:(()=>{class e{constructor(a,o,s,r,d){this.repoService=a,this.router=o,this.dialog=s,this.dialogserve=r,this.activeRoute=d}ngOnInit(){this.getCustomer(),this.getCustomerAccount()}getCustomer(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}`).subscribe(o=>{this.customer=o},o=>{this.dialogserve.openErrorDialog(o).afterClosed().subscribe(s=>{this.router.navigate(["/ui-components/lists"])})})}getCustomerAccount(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}/accounts`).subscribe(o=>{this.accounts=o},o=>{})}addAccount(a){this.dialog.open(he,{width:"500px",height:"270px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteCustomer(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the account ?").afterClosed().subscribe(o=>{o&&this.repoService.delete(`api/customers/${this.activeRoute.snapshot.params.id}/accounts/${a}`).subscribe(d=>{this.getCustomer()})})}close(){this.router.navigate(["/ui-components/lists"])}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(C.U),t.rXU(A.Ix),t.rXU(b.bZ),t.rXU(j.o),t.rXU(A.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-details"]],decls:60,vars:9,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"b-1","shadow-none"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"col-12"],["fxHide.xs",""],["class","col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-4"],["mat-flat-button","","color","warn",1,"m-t-8",3,"click"]],template:function(o,s){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Customer details"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return s.close()}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s(),t.EFF(8," Close "),t.k0s()(),t.j41(9,"mat-card-content",4)(10,"div",5)(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Basic information"),t.k0s()(),t.j41(16,"mat-card-content",4)(17,"mat-list")(18,"mat-list-item")(19,"span",8),t.EFF(20,"Full Name"),t.k0s(),t.j41(21,"span",9),t.EFF(22),t.k0s()(),t.j41(23,"mat-list-item")(24,"span",8),t.EFF(25,"Date of birth"),t.k0s(),t.j41(26,"span",9),t.EFF(27),t.nI1(28,"date"),t.k0s()()()()()(),t.j41(29,"div",6)(30,"mat-card",7)(31,"mat-card-header")(32,"mat-card-title"),t.EFF(33,"Address"),t.k0s()(),t.j41(34,"mat-card-content",4)(35,"mat-list")(36,"mat-list-item")(37,"span",8),t.EFF(38,"Resident address"),t.k0s(),t.j41(39,"span",9),t.EFF(40),t.k0s()(),t.j41(41,"mat-list-item")(42,"span",8),t.EFF(43,"Country"),t.k0s(),t.j41(44,"span",9),t.EFF(45),t.k0s()()()()()(),t.j41(46,"div",10)(47,"mat-card",7)(48,"mat-card-header")(49,"mat-card-title"),t.EFF(50),t.k0s(),t.nrm(51,"span",2),t.j41(52,"button",3),t.bIt("click",function(){return s.addAccount(s.customer.id)}),t.j41(53,"mat-icon"),t.EFF(54,"add"),t.k0s(),t.j41(55,"span",11),t.EFF(56,"Create new account "),t.k0s()()(),t.j41(57,"mat-card-content",4)(58,"div",5),t.DNE(59,fe,15,5,"div",12),t.k0s()()()()()()()),2&o&&(t.R7$(22),t.Lme("",null==s.customer?null:s.customer.firstName," ",null==s.customer?null:s.customer.lastName,""),t.R7$(5),t.JRh(t.bMT(28,7,null==s.customer?null:s.customer.dateOfBirth)),t.R7$(13),t.JRh(null==s.customer?null:s.customer.address),t.R7$(5),t.JRh(null==s.customer?null:s.customer.country),t.R7$(5),t.SpI("Accounts (",null==s.customer?null:s.customer.accountCount,")"),t.R7$(9),t.Y8G("ngForOf",s.accounts))},dependencies:[R.Sq,l.RN,l.m2,l.MM,l.dh,w.jt,w.YE,w.C_,w.yE,k.$z,v.An,$.Om,R.vh],encapsulation:2})}return e})()}]}];var be=h(5230);let Fe=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e});static#a=this.\u0275inj=t.G2t({imports:[R.MD,A.iI.forChild(_e),M.G,i.YN,i.X1,L.X.pick(X),be.WX,E._B.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0,closeButton:!0})]})}return e})()}}]);