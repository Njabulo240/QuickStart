"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[233],{3233:(x,E,a)=>{a.r(E),a.d(E,{AuthenticationModule:()=>z});var u=a(8498),F=a(177),P=a(9308),m=a(1818),w=a(2788),U=a(1351),v=a(5484),e=a(9417),$=a(4912),G=a(5509),t=a(4438),y=a(1682),R=a(3575),C=a(1321),h=a(7421);function T(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Confirmation is required"),t.k0s())}function D(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Passwords must match"),t.k0s())}let S=(()=>{class r{constructor(n,s,o,i,g,d){this.authService=n,this.passConfValidator=s,this.route=o,this.router=i,this.dialogserve=g,this.activeRoute=d,this.hidePassword=!0,this.validateControl=l=>this.passwordForm.get(l).invalid&&this.passwordForm.get(l).touched,this.hasError=(l,c)=>this.passwordForm.get(l).hasError(c),this.resetPassword=l=>{const c={...l};this.authService.changeDefaultPassword(`api/authentication/${this.activeRoute.snapshot.params.user}/ChangeDefulatPassword`,{password:c.password,confirmPassword:c.confirm}).subscribe({next:j=>{this.dialogserve.openSuccessDialog("Password changed successfully, please login.").afterClosed().subscribe(O=>{this.logout()})},error:j=>{console.log(j.message),this.dialogserve.openErrorDialog(j.message).afterClosed().subscribe(O=>{})}})},this.logout=()=>{this.authService.logout(),this.router.navigate(["/authentication/login"])}}ngOnInit(){this.passwordForm=new e.gE({password:new e.MJ("",[e.k0.required]),confirm:new e.MJ("",[e.k0.required])}),this.passwordForm.get("confirm").setValidators([e.k0.required,this.passConfValidator.validateConfirmPassword(this.passwordForm.get("password"))])}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(y.k),t.rXU(R.a),t.rXU(u.nX),t.rXU(u.Ix),t.rXU(C.o),t.rXU(u.nX))};static#o=this.\u0275cmp=t.VBU({type:r,selectors:[["app-change-defualt-password"]],decls:31,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100","position-relative"],[1,"password-container"],["matInput","","id","password","formControlName","password",1,"form-control",3,"type"],[1,"password-toggle-button",3,"click"],["matInput","","id","confirm","formControlName","confirm",1,"form-control",3,"type"],[4,"ngIf"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a"),t.nrm(7,"img",6),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Change password"),t.k0s(),t.j41(10,"form",7),t.bIt("ngSubmit",function(){return o.resetPassword(o.passwordForm.value)}),t.j41(11,"mat-label",8),t.EFF(12,"Password"),t.k0s(),t.j41(13,"mat-form-field",9)(14,"div",10),t.nrm(15,"input",11),t.j41(16,"div",12),t.bIt("click",function(){return o.togglePasswordVisibility()}),t.j41(17,"mat-icon"),t.EFF(18),t.k0s()()()(),t.j41(19,"mat-label",8),t.EFF(20,"Confirm Password"),t.k0s(),t.j41(21,"mat-form-field",9)(22,"div",10),t.nrm(23,"input",13),t.j41(24,"div",12),t.bIt("click",function(){return o.togglePasswordVisibility()}),t.j41(25,"mat-icon"),t.EFF(26),t.k0s()()()(),t.DNE(27,T,2,0,"mat-error",14)(28,D,2,0,"mat-error",14),t.j41(29,"button",15),t.EFF(30," Change password "),t.k0s()()()()()()()),2&s&&(t.R7$(10),t.Y8G("formGroup",o.passwordForm),t.R7$(5),t.Y8G("type",o.hidePassword?"password":"text"),t.R7$(3),t.JRh(o.hidePassword?"visibility_off":"visibility"),t.R7$(5),t.Y8G("type",o.hidePassword?"password":"text"),t.R7$(3),t.JRh(o.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("ngIf",o.validateControl("confirm")&&o.hasError("confirm","required")),t.R7$(),t.Y8G("ngIf",o.hasError("confirm","mustMatch")),t.R7$(),t.Y8G("disabled",!o.passwordForm.valid))},dependencies:[F.bT,P.An,m.RN,m.m2,m.dh,w.fg,h.rl,h.nJ,h.TL,v.$z,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],encapsulation:2})}return r})();var I=a(5312),X=a(2524);const Y=()=>["/authentication/forgot-password"],V=()=>["/dashboard"],A=()=>["/authentication/login"];function L(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Please enter a valid email address "),t.k0s())}function M(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Email is required "),t.k0s())}function _(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Confirmation is required"),t.k0s())}function B(r,b){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Passwords must match"),t.k0s())}const W=[{path:"",children:[{path:"login",component:(()=>{class r{constructor(n,s,o,i,g){this.authService=n,this.router=s,this.route=o,this.dialogserve=i,this.dialog=g,this.hidePassword=!0,this.validateControl=d=>this.loginForm?.get(d)?.invalid&&this.loginForm.get(d)?.touched,this.hasError=(d,l)=>this.loginForm?.get(d)?.hasError(l),this.loginUser=d=>{const c={...d};this.authService.loginUser("api/authentication/login",{userName:c.username,password:c.password,clientURI:I.c.clientUrl+"/authentication/forgot-password"}).subscribe({next:p=>{"Password.321"===c.password?(this.authService.logout(),this.router.navigate([`/authentication/change-password/${c.username}`])):(localStorage.setItem("token",p.token),this.authService.sendAuthStateChangeNotification(p.isAuthSuccessful),this.authService.updateuser.next(),this.router.navigate(["/"]))},error:p=>{this.dialogserve.openErrorDialog(p.message).afterClosed().subscribe(k=>{this.router.navigate(["authentication/login"])})}})}}ngOnInit(){this.loginForm=new e.gE({username:new e.MJ("",[e.k0.required]),password:new e.MJ("",[e.k0.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}Update(n){this.dialog.open(S,{width:"400px",height:"440px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{user:n}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(y.k),t.rXU(u.Ix),t.rXU(u.nX),t.rXU(C.o),t.rXU(X.bZ))};static#o=this.\u0275cmp=t.VBU({type:r,selectors:[["app-login"]],decls:28,vars:6,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","text","id","username","formControlName","username",1,"form-control"],["appearance","outline","color","primary",1,"w-100","position-relative"],[1,"password-container"],["matInput","","id","password","formControlName","password",1,"form-control",3,"type"],[1,"password-toggle-button",3,"click"],[1,"d-flex","align-items-center","m-b-12"],[1,"text-primary","f-w-600","text-decoration-none","m-l-auto","f-s-14",3,"routerLink"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a"),t.nrm(7,"img",6),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Log in"),t.k0s(),t.j41(10,"form",7),t.bIt("ngSubmit",function(){return o.loginUser(o.loginForm.value)}),t.j41(11,"mat-label",8),t.EFF(12,"Username"),t.k0s(),t.j41(13,"mat-form-field",9),t.nrm(14,"input",10),t.k0s(),t.j41(15,"mat-label",8),t.EFF(16,"Password"),t.k0s(),t.j41(17,"mat-form-field",11)(18,"div",12),t.nrm(19,"input",13),t.j41(20,"div",14),t.bIt("click",function(){return o.togglePasswordVisibility()}),t.j41(21,"mat-icon"),t.EFF(22),t.k0s()()()(),t.j41(23,"div",15)(24,"a",16),t.EFF(25,"Forgot Password ?"),t.k0s()(),t.j41(26,"button",17),t.EFF(27," Sign In "),t.k0s()()()()()()()),2&s&&(t.R7$(10),t.Y8G("formGroup",o.loginForm),t.R7$(9),t.Y8G("type",o.hidePassword?"password":"text"),t.R7$(3),t.JRh(o.hidePassword?"visibility_off":"visibility"),t.R7$(2),t.Y8G("routerLink",t.lJ4(5,Y)),t.R7$(2),t.Y8G("disabled",!o.loginForm.valid))},dependencies:[u.Wk,P.An,m.RN,m.m2,m.dh,w.fg,h.rl,h.nJ,v.$z,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],encapsulation:2})}return r})()},{path:"change-password/:user",component:S},{path:"forgot-password",component:(()=>{class r{constructor(n,s,o){this._authService=n,this.dialogserve=s,this.router=o,this.validateControl=i=>this.forgotPasswordForm.get(i)?.invalid&&this.forgotPasswordForm.get(i)?.touched,this.hasError=(i,g)=>this.forgotPasswordForm.get(i)?.hasError(g),this.forgotPassword=i=>{const d={email:{...i}.email,clientURI:I.c.clientUrl+"/authentication/reset-password"};this._authService.forgotPassword("api/authentication/ForgotPassword",d).subscribe({next:l=>{this.dialogserve.openSuccessDialog("The link has been sent, please check your email to reset your password.").afterClosed().subscribe(c=>{this.router.navigate(["authentication/login"])})},error:l=>{this.dialogserve.openErrorDialog(l.message).afterClosed().subscribe(c=>{this.router.navigate(["authentication/forgot-password"])})}})}}ngOnInit(){this.forgotPasswordForm=new e.gE({email:new e.MJ("",[e.k0.required,e.k0.email])})}get email(){return this.forgotPasswordForm.get("email")}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(y.k),t.rXU(C.o),t.rXU(u.Ix))};static#o=this.\u0275cmp=t.VBU({type:r,selectors:[["app-forgot-password"]],decls:25,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-body-1"],["appearance","outline","color","primary",1,"w-100"],["matInput","","placeholder","Email address","type","email","id","email","formControlName","email",1,"form-control"],[4,"ngIf"],[1,"d-flex","align-items-center","m-b-12"],["mat-flat-button","","color","warn",1,"m-t-8",3,"routerLink"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","type","submit",1,"m-t-8",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),t.nrm(7,"img",7),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Forgot password?"),t.k0s(),t.j41(10,"form",8),t.bIt("ngSubmit",function(){return o.forgotPassword(o.forgotPasswordForm.value)}),t.j41(11,"span",9),t.EFF(12,"A password reset link will be sent to your email to reset your password. If you don't get an email within a few minutes, please re-try. "),t.k0s(),t.nrm(13,"br")(14,"br"),t.j41(15,"mat-form-field",10),t.nrm(16,"input",11),t.DNE(17,L,2,0,"mat-error",12)(18,M,2,0,"mat-error",12),t.k0s(),t.j41(19,"div",13)(20,"button",14),t.EFF(21," Back to login "),t.k0s(),t.nrm(22,"span",15),t.j41(23,"button",16),t.EFF(24," Submit "),t.k0s()()()()()()()()),2&s&&(t.R7$(6),t.Y8G("routerLink",t.lJ4(6,V)),t.R7$(4),t.Y8G("formGroup",o.forgotPasswordForm),t.R7$(7),t.Y8G("ngIf",(null==o.email?null:o.email.hasError("email"))&&!(null!=o.email&&o.email.hasError("required"))),t.R7$(),t.Y8G("ngIf",null==o.email?null:o.email.hasError("required")),t.R7$(2),t.Y8G("routerLink",t.lJ4(7,A)),t.R7$(3),t.Y8G("disabled",!o.forgotPasswordForm.valid))},dependencies:[F.bT,u.Wk,m.RN,m.m2,m.dh,w.fg,h.rl,h.TL,v.$z,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],encapsulation:2})}return r})()},{path:"reset-password",component:(()=>{class r{constructor(n,s,o,i,g){this.authService=n,this.passConfValidator=s,this.route=o,this.router=i,this.dialogserve=g,this.hidePassword=!0,this.validateControl=d=>this.resetPasswordForm.get(d).invalid&&this.resetPasswordForm.get(d).touched,this.hasError=(d,l)=>this.resetPasswordForm.get(d).hasError(l),this.resetPassword=d=>{const l={...d};this.authService.resetPassword("api/authentication/resetpassword",{password:l.password,confirmPassword:l.confirm,token:this.token,email:this.email}).subscribe({next:f=>{this.dialogserve.openSuccessDialog("Password changed successfully, please login.").afterClosed().subscribe(p=>{this.router.navigate(["authentication/login"])})},error:f=>{this.dialogserve.openErrorDialog(f.message).afterClosed().subscribe(p=>{this.router.navigate(["authentication/resetpassword"])})}})}}ngOnInit(){this.resetPasswordForm=new e.gE({password:new e.MJ("",[e.k0.required]),confirm:new e.MJ("")}),this.resetPasswordForm.get("confirm").setValidators([e.k0.required,this.passConfValidator.validateConfirmPassword(this.resetPasswordForm.get("password"))]),this.token=this.route.snapshot.queryParams.token,this.email=this.route.snapshot.queryParams.email}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(y.k),t.rXU(R.a),t.rXU(u.nX),t.rXU(u.Ix),t.rXU(C.o))};static#o=this.\u0275cmp=t.VBU({type:r,selectors:[["app-reset-password"]],decls:31,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],["src","../../../../assets/images/logos/matech-logo.svg","alt","logo",1,"align-middle","m-2"],["autocomplete","off","novalidate","",1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100","position-relative"],[1,"password-container"],["matInput","","id","password","formControlName","password",1,"form-control",3,"type"],[1,"password-toggle-button",3,"click"],["matInput","","id","confirm","formControlName","confirm",1,"form-control",3,"type"],[4,"ngIf"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a"),t.nrm(7,"img",6),t.k0s()(),t.j41(8,"mat-card-title"),t.EFF(9,"Change password"),t.k0s(),t.j41(10,"form",7),t.bIt("ngSubmit",function(){return o.resetPassword(o.resetPasswordForm.value)}),t.j41(11,"mat-label",8),t.EFF(12,"Password"),t.k0s(),t.j41(13,"mat-form-field",9)(14,"div",10),t.nrm(15,"input",11),t.j41(16,"div",12),t.bIt("click",function(){return o.togglePasswordVisibility()}),t.j41(17,"mat-icon"),t.EFF(18),t.k0s()()()(),t.j41(19,"mat-label",8),t.EFF(20,"Confirm Password"),t.k0s(),t.j41(21,"mat-form-field",9)(22,"div",10),t.nrm(23,"input",13),t.j41(24,"div",12),t.bIt("click",function(){return o.togglePasswordVisibility()}),t.j41(25,"mat-icon"),t.EFF(26),t.k0s()()()(),t.DNE(27,_,2,0,"mat-error",14)(28,B,2,0,"mat-error",14),t.j41(29,"button",15),t.EFF(30," Change password "),t.k0s()()()()()()()),2&s&&(t.R7$(10),t.Y8G("formGroup",o.resetPasswordForm),t.R7$(5),t.Y8G("type",o.hidePassword?"password":"text"),t.R7$(3),t.JRh(o.hidePassword?"visibility_off":"visibility"),t.R7$(5),t.Y8G("type",o.hidePassword?"password":"text"),t.R7$(3),t.JRh(o.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("ngIf",o.validateControl("confirm")&&o.hasError("confirm","required")),t.R7$(),t.Y8G("ngIf",o.hasError("confirm","mustMatch")),t.R7$(),t.Y8G("disabled",!o.resetPasswordForm.valid))},dependencies:[F.bT,P.An,m.RN,m.m2,m.dh,w.fg,h.rl,h.nJ,h.TL,v.$z,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],encapsulation:2})}return r})()}]}];var q=a(1626);let z=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#o=this.\u0275mod=t.$C({type:r});static#e=this.\u0275inj=t.G2t({imports:[F.MD,u.iI.forChild(W),P.m_,m.Hu,w.fS,U.g7,v.Hl,e.YN,e.X1,$.X.pick(G),q.q1]})}return r})()}}]);